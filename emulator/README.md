This directory contains emulator and a sample injector.

| File              | Description                                                    |
|-------------------|:---------------------------------------------------------------|
| d_time.h          | The header containing essential declarations for emulator      |
| exe.cpp           | Emulator function                                              |
| loader.cpp        | Header file containing helper functions for injector          |
| main.cpp          | Main function for injector                                     |
| payload_headers.h | The header file with essential declarations for exe.cpp        |
| stdafx.h          | Conventional file for faster build                             |
| stdafx.cpp        | Conventional file for faster build                             |

### How to use
Emulator code is best built using Visual Studio 10.
Follow the following steps carefully to avoid confusions:
1. Open Visual Studio and use `Create Project from Existing Code` to create a project around our code.
2. Ensure the following settings for the project:  
   1. C/C++ --> Code Generation --> Buffer Security Check --> NO
   2. C/C++ --> Advanced --> Calling Convention --> `__stdcall`
   3. Linker --> General --> Enable Incremental Linking --> NO
   4. Linker --> System --> Sub-System --> Console
3. In `d_time.h`, uncomment the processes you like to inject to.
4. In `main.cpp`  
   1. Set the number of processes you like to inject to
   2. Set the number of blocks generated by the splitter (read the splitter output)
   3. Set the number of segments generated by the splitter
5. Build the emulator.
6. Copy the output files of the splitter to the working directory. Alternatively, set the working directory of the project to the directory containing splitter outputs.
6. Make sure that your victim processes are running.
7. Run the emulator to start D-TIME.

The emulator.exe generated is an injector which will
   1. Store blocks and segments in shared memory
   2. Inject the initial emulators in processes
